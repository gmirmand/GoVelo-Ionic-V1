<ion-header>
    <ion-navbar color="primary">
        <ion-title>Proposes</ion-title>
        <ion-buttons start class="start">
            <button ion-button icon-left (click)="prev()">
                <ion-icon name="arrow-back"></ion-icon>
                Prev
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>


<ion-content padding>
    <ion-slides #proposeSlider>
        <ion-slide>
            <div class="slide-container">
                <h2> Choisissez un vélo </h2>
                <div class="container-bike">
                    <button type="button" class="button button-stable bike"> <!-- GO STEP 7 -->
                        <img src="/img/bike.svg" alt="Votre vélo" class="header">
                        <div class="h3">VTT</div>
                        <div class="h5">Le Puy en velay</div>
                        <div class="h4">10€ / jour</div>
                        <div class="param"><img src="/img/icons/params.svg" alt="paramètres"></div>
                    </button>
                </div>

                <div class="separator">{{"OR" | translate}}</div>

                <button ion-button clear icon-right (click)="next()"
                        class="button button-block button-calm no-animation">
                    Créer un vélo
                </button>
            </div>
        </ion-slide>
        <ion-slide>
            <h2> Titre et description de l'annonce </h2>
            <p *ngIf="submitAttempt" style="color: #ea6153;">Veuillez remplir tous les champs s'il vous plaît.</p>
            <ion-list no-lines>
                <form [formGroup]="slideOneForm">
                    <!--TITLE-->
                    <ion-item>
                        <ion-label floating>Titre de l'annonce</ion-label>
                        <ion-input formControlName="title" type="text"
                                   [class.invalid]="!slideOneForm.controls.title.valid
                                       && (slideOneForm.controls.title.dirty || submitAttempt)">
                        </ion-input>
                    </ion-item>

                    <ion-item *ngIf="!slideOneForm.controls.title.valid
                                && (slideOneForm.controls.title.dirty || submitAttempt)">
                        <p>Veuillez entrer un titre valide. (entre 5 et 50 caractères)</p>
                    </ion-item>

                    <!--DESCRIPTION-->
                    <ion-item>
                        <ion-label floating>Description du vélo</ion-label>
                        <ion-textarea formControlName="description"
                                      [class.invalid]="!slideOneForm.controls.description.valid &&
                                          (slideOneForm.controls.description.dirty || submitAttempt)">
                        </ion-textarea>
                    </ion-item>

                    <ion-item *ngIf="!slideOneForm.controls.description.valid
                        && (slideOneForm.controls.description.dirty || submitAttempt)">
                        <p>Veuillez entrer une description valide.</p>
                    </ion-item>
                </form>

                <button ion-button icon-right (click)="next()">
                    {{'NEXT' | translate}}
                    <ion-icon name="arrow-next"></ion-icon>
                </button>
            </ion-list>
        </ion-slide>
        <ion-slide>
            <h2> Ajouter des photos de votre vélo </h2>
            <p>Les annonces avec photo sont bien plus susceptibles d'interesser de futurs locataires</p>
            <!--TOCHANGE-->
            <ion-item>
                <form class="form-group" [formGroup]="slideTwoForm">
                    <div class="custom-file">
                        <input type="file" multiple
                               id="file"
                               class="custom-file-input"
                               name="file"
                               [size]="size"
                               [withMeta]="withMeta"
                               [allowedExt]="allowedFileExt"
                               [allowedTypes]="allowedFileTypes"
                               [maxWidth]="maxWidth"
                               [maxHeight]="maxHeight"
                               [formControl]="slideTwoForm.get('file')">
                        <label for="file" class="custom-file-label m0"> </label>
                    </div>
                </form>

                <ion-item *ngFor="let file of fileList; let i = index">
                    <div class="file-container">
                        <div class="error-container">
                            <div [ngClass]="{'text-danger': file.errors['fileType']}">
                                Type de fichier non autorisé
                            </div>
                            <div [ngClass]="{'text-danger': file.errors['fileExt']}">
                                Extension de fichier non autorisé
                            </div>
                            <div [ngClass]="{'text-danger': file.errors['fileSize']}">
                                Le fichier est trop gros
                            </div>
                            <div [ngClass]="{'text-danger': file.errors['imageWidth']}">
                                Image trop large
                            </div>
                            <div [ngClass]="{'text-danger': file.errors['imageHeight']}">
                                Image trop haute
                            </div>
                        </div>
                        <div class="file-contents">
                            <img *ngIf="file.imgSrc" [src]="file.imgSrc"/>
                            <p *ngIf="file.textContent" [innerHtml]="file.textContent"></p>
                        </div>
                        <div class="remove" (click)="removeFile(i)">
                            <ion-icon name="trash"></ion-icon>
                        </div>
                    </div>
                </ion-item>
            </ion-item>

            <button ion-button icon-right (click)="next()">
                {{'NEXT' | translate}}
                <ion-icon name="arrow-next"></ion-icon>
            </button>
        </ion-slide>


        <ion-slide>
            <h2>Quel type de vélo ?</h2>
            <form [formGroup]="slideThreeForm">
                <ion-list no-lines>
                    <!--TYPE-->
                    <ion-row radio-group formControlName="type">
                        <ion-item>
                            <ion-label>VTT</ion-label>
                            <ion-radio value="VTT" id="VTT" checked>
                            </ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>BMX</ion-label>
                            <ion-radio value="BMX" id="BMX">
                            </ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>Route</ion-label>
                            <ion-radio value="Route" id="Route">
                            </ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>Pliant</ion-label>
                            <ion-radio value="Pliant" id="Pliant">
                            </ion-radio>
                        </ion-item>
                        <ion-item>
                            <ion-label>Electrique</ion-label>
                            <ion-radio value="Electrique" id="Electrique">
                            </ion-radio>
                        </ion-item>
                    </ion-row>
                </ion-list>
            </form>

            <button ion-button icon-right (click)="next()">
                {{'NEXT' | translate}}
                <ion-icon name="arrow-next"></ion-icon>
            </button>
        </ion-slide>
        <ion-slide>
            <h2>Où louez-vous votre vélo ?</h2>
            <ion-list no-lines>
                <form [formGroup]="slideFourForm">
                    <!--VILLE-->
                    <ion-item>
                        <ion-label floating>Ville</ion-label>
                        <ion-input formControlName="town" type="text"
                                   [class.invalid]="!slideFourForm.controls.town.valid
                                       && (slideFourForm.controls.town.dirty || submitAttempt)">
                        </ion-input>
                    </ion-item>

                    <ion-item *ngIf="!slideFourForm.controls.town.valid
                                && (slideFourForm.controls.town.dirty || submitAttempt)">
                        <p>Veuillez entrer une ville via les propositions</p>
                    </ion-item>
                </form>

                TEST
                <ion-list>
                    <ion-item>
                        <ion-input (click)="showAddressModal()" [(ngModel)]="address.place" type="text" placeholder="Pick an address"></ion-input>
                    </ion-item>
                </ion-list>

                <button ion-button icon-right (click)="save()">
                    {{'NEXT' | translate}}
                    <ion-icon name="arrow-next"></ion-icon>
                </button>
            </ion-list>
        </ion-slide>
    </ion-slides>
</ion-content>

